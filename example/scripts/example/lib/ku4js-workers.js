(function(a){function c(f){if(!$.exists(Worker)){throw $.ku4exception("Unsupported Feature","Client does not support Workers.")}var h=$.observer(),e=$.observer(),g=new Worker(f);g.onmessage=function(i){h.notify(i.data)};g.onerror=function(i){e.notify(i.data)};this._onSuccess=h;this._onError=e;this._worker=g}c.prototype={onSuccess:function(f,e){this._onSuccess.add(function(g){f.apply(e,$.json.deserialize(g))});return this},onError:function(f,e){this._onError.add(function(g){f.apply(e,$.json.deserialize(g))});return this},invoke:function(e,i,j,f,h){var g=$.json.serialize([e,i,j,f,h]);this._worker.postMessage(g);return this}};$.ku4WorkerClient=function(e){return new c(e)};var b="ku4js-workers-thread.js";$.ku4WorkerClient.threadPath=function(e){b=e};$.ku4WorkerClient.thread=function(){try{return new c(b)}catch(f){throw $.ku4exception("Invalid path","ku4 threading requires a browser that supports Workers and a valid path to the ku4js-workers-thread.js file. You can set that path with the $.ku4WorkerClient.threadPath([PATH]) method.")}};function d(){}d.prototype={execute:function(f,i){var h=($.exists(f)&&$.exists(f.data))?f.data:f,e=$.json.deserialize(h);if(!$.isArray(e)||e.length<1){return i(null)}var g=($.isBool(e[e.length-1]))?e.pop():false;if(g){e.push(i);$.ku4reflection.invoke(e)}else{return i($.ku4reflection.invoke(e))}}};$.ku4WorkerReceiver=function(){return new d()}})();